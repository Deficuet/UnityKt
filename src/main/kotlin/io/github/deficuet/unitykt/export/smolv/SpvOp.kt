package io.github.deficuet.unitykt.export.smolv

import io.github.deficuet.unitykt.export.spirv.NumericalEnum
import io.github.deficuet.unitykt.export.spirv.NumericalEnumCompanion
import io.github.deficuet.unitykt.util.equalsAnyOf

@Suppress("unused")
internal enum class SpvOp(
    override val id: UInt,
    private val hasResultValue: Int,
    private val hasTypeValue: Int,
    val deltaFromResult: Int,
    private val varRestValue: Int
): NumericalEnum<UInt> {
    DefaultOutOfRange(9999u, 0, 0, 0, 0),
    Nop(0u, 0, 0, 0, 0),
    Undef(1u, 1, 1, 0, 0),
    SourceContinued(2u, 0, 0, 0, 0),
    Source(3u, 0, 0, 0, 1),
    SourceExtension(4u, 0, 0, 0, 0),
    Name(5u, 0, 0, 0, 0),
    MemberName(6u, 0, 0, 0, 0),
    String(7u, 0, 0, 0, 0),
    Line(8u, 0, 0, 0, 1),
    Op9(9u, 1, 1, 0, 0),
    Extension(10u, 0, 0, 0, 0),
    ExtInstImport(11u, 1, 0, 0, 0),
    ExtInst(12u, 1, 1, 0, 1),
    VectorShuffleCompact(13u, 1, 1, 2, 1),
    MemoryModel(14u, 0, 0, 0, 1),
    EntryPoint(15u, 0, 0, 0, 1),
    ExecutionMode(16u, 0, 0, 0, 1),
    Capability(17u, 0, 0, 0, 1),
    Op18(18u, 1, 1, 0, 0),
    TypeVoid(19u, 1, 0, 0, 1),
    TypeBool(20u, 1, 0, 0, 1),
    TypeInt(21u, 1, 0, 0, 1),
    TypeFloat(22u, 1, 0, 0, 1),
    TypeVector(23u, 1, 0, 0, 1),
    TypeMatrix(24u, 1, 0, 0, 1),
    TypeImage(25u, 1, 0, 0, 1),
    TypeSampler(26u, 1, 0, 0, 1),
    TypeSampledImage(27u, 1, 0, 0, 1),
    TypeArray(28u, 1, 0, 0, 1),
    TypeRuntimeArray(29u, 1, 0, 0, 1),
    TypeStruct(30u, 1, 0, 0, 1),
    TypeOpaque(31u, 1, 0, 0, 1),
    TypePointer(32u, 1, 0, 0, 1),
    TypeFunction(33u, 1, 0, 0, 1),
    TypeEvent(34u, 1, 0, 0, 1),
    TypeDeviceEvent(35u, 1, 0, 0, 1),
    TypeReserveId(36u, 1, 0, 0, 1),
    TypeQueue(37u, 1, 0, 0, 1),
    TypePipe(38u, 1, 0, 0, 1),
    TypeForwardPointer(39u, 0, 0, 0, 1),
    Op40(40u, 1, 1, 0, 0),
    ConstantTrue(41u, 1, 1, 0, 0),
    ConstantFalse(42u, 1, 1, 0, 0),
    Constant(43u, 1, 1, 0, 0),
    ConstantComposite(44u, 1, 1, 9, 0),
    ConstantSampler(45u, 1, 1, 0, 1),
    ConstantNull(46u, 1, 1, 0, 0),
    Op47(47u, 1, 1, 0, 0),
    SpecConstantTrue(48u, 1, 1, 0, 0),
    SpecConstantFalse(49u, 1, 1, 0, 0),
    SpecConstant(50u, 1, 1, 0, 0),
    SpecConstantComposite(51u, 1, 1, 9, 0),
    SpecConstantOp(52u, 1, 1, 0, 0),
    Op53(53u, 1, 1, 0, 0),
    Function(54u, 1, 1, 0, 1),
    FunctionParameter(55u, 1, 1, 0, 0),
    FunctionEnd(56u, 0, 0, 0, 0),
    FunctionCall(57u, 1, 1, 9, 0),
    Op58(58u, 1, 1, 0, 0),
    Variable(59u, 1, 1, 0, 1),
    ImageTexelPointer(60u, 1, 1, 0, 0),
    Load(61u, 1, 1, 1, 1),
    Store(62u, 0, 0, 2, 1),
    CopyMemory(63u, 0, 0, 0, 0),
    CopyMemorySized(64u, 0, 0, 0, 0),
    AccessChain(65u, 1, 1, 0, 1),
    InBoundsAccessChain(66u, 1, 1, 0, 0),
    PtrAccessChain(67u, 1, 1, 0, 0),
    ArrayLength(68u, 1, 1, 0, 0),
    GenericPtrMemSemantics(69u, 1, 1, 0, 0),
    InBoundsPtrAccessChain(70u, 1, 1, 0, 0),
    Decorate(71u, 0, 0, 0, 1),
    MemberDecorate(72u, 0, 0, 0, 1),
    DecorationGroup(73u, 1, 0, 0, 0),
    GroupDecorate(74u, 0, 0, 0, 0),
    GroupMemberDecorate(75u, 0, 0, 0, 0),
    Op76(76u, 1, 1, 0, 0),
    VectorExtractDynamic(77u, 1, 1, 1, 1),
    VectorInsertDynamic(78u, 1, 1, 2, 1),
    VectorShuffle(79u, 1, 1, 2, 1),
    CompositeConstruct(80u, 1, 1, 9, 0),
    CompositeExtract(81u, 1, 1, 1, 1),
    CompositeInsert(82u, 1, 1, 2, 1),
    CopyObject(83u, 1, 1, 1, 0),
    Transpose(84u, 1, 1, 0, 0),
    Op85(85u, 1, 1, 0, 0),
    SampledImage(86u, 1, 1, 0, 0),
    ImageSampleImplicitLod(87u, 1, 1, 2, 1),
    ImageSampleExplicitLod(88u, 1, 1, 2, 1),
    ImageSampleDrefImplicitLod(89u, 1, 1, 3, 1),
    ImageSampleDrefExplicitLod(90u, 1, 1, 3, 1),
    ImageSampleProjImplicitLod(91u, 1, 1, 2, 1),
    ImageSampleProjExplicitLod(92u, 1, 1, 2, 1),
    ImageSampleProjDrefImplicitLod(93u, 1, 1, 3, 1),
    ImageSampleProjDrefExplicitLod(94u, 1, 1, 3, 1),
    ImageFetch(95u, 1, 1, 2, 1),
    ImageGather(96u, 1, 1, 3, 1),
    ImageDrefGather(97u, 1, 1, 3, 1),
    ImageRead(98u, 1, 1, 2, 1),
    ImageWrite(99u, 0, 0, 3, 1),
    Image(100u, 1, 1, 1, 0),
    ImageQueryFormat(101u, 1, 1, 1, 0),
    ImageQueryOrder(102u, 1, 1, 1, 0),
    ImageQuerySizeLod(103u, 1, 1, 2, 0),
    ImageQuerySize(104u, 1, 1, 1, 0),
    ImageQueryLod(105u, 1, 1, 2, 0),
    ImageQueryLevels(106u, 1, 1, 1, 0),
    ImageQuerySamples(107u, 1, 1, 1, 0),
    Op108(108u, 1, 1, 0, 0),
    ConvertFToU(109u, 1, 1, 1, 0),
    ConvertFToS(110u, 1, 1, 1, 0),
    ConvertSToF(111u, 1, 1, 1, 0),
    ConvertUToF(112u, 1, 1, 1, 0),
    UConvert(113u, 1, 1, 1, 0),
    SConvert(114u, 1, 1, 1, 0),
    FConvert(115u, 1, 1, 1, 0),
    QuantizeToF16(116u, 1, 1, 1, 0),
    ConvertPtrToU(117u, 1, 1, 1, 0),
    SatConvertSToU(118u, 1, 1, 1, 0),
    SatConvertUToS(119u, 1, 1, 1, 0),
    ConvertUToPtr(120u, 1, 1, 1, 0),
    PtrCastToGeneric(121u, 1, 1, 1, 0),
    GenericCastToPtr(122u, 1, 1, 1, 0),
    GenericCastToPtrExplicit(123u, 1, 1, 1, 1),
    Bitcast(124u, 1, 1, 1, 0),
    Op125(125u, 1, 1, 0, 0),
    SNegate(126u, 1, 1, 1, 0),
    FNegate(127u, 1, 1, 1, 0),
    IAdd(128u, 1, 1, 2, 0),
    FAdd(129u, 1, 1, 2, 0),
    ISub(130u, 1, 1, 2, 0),
    FSub(131u, 1, 1, 2, 0),
    IMul(132u, 1, 1, 2, 0),
    FMul(133u, 1, 1, 2, 0),
    UDiv(134u, 1, 1, 2, 0),
    SDiv(135u, 1, 1, 2, 0),
    FDiv(136u, 1, 1, 2, 0),
    UMod(137u, 1, 1, 2, 0),
    SRem(138u, 1, 1, 2, 0),
    SMod(139u, 1, 1, 2, 0),
    FRem(140u, 1, 1, 2, 0),
    FMod(141u, 1, 1, 2, 0),
    VectorTimesScalar(142u, 1, 1, 2, 0),
    MatrixTimesScalar(143u, 1, 1, 2, 0),
    VectorTimesMatrix(144u, 1, 1, 2, 0),
    MatrixTimesVector(145u, 1, 1, 2, 0),
    MatrixTimesMatrix(146u, 1, 1, 2, 0),
    OuterProduct(147u, 1, 1, 2, 0),
    Dot(148u, 1, 1, 2, 0),
    IAddCarry(149u, 1, 1, 2, 0),
    ISubBorrow(150u, 1, 1, 2, 0),
    UMulExtended(151u, 1, 1, 2, 0),
    SMulExtended(152u, 1, 1, 2, 0),
    Op153(153u, 1, 1, 0, 0),
    Any(154u, 1, 1, 1, 0),
    All(155u, 1, 1, 1, 0),
    IsNan(156u, 1, 1, 1, 0),
    IsInf(157u, 1, 1, 1, 0),
    IsFinite(158u, 1, 1, 1, 0),
    IsNormal(159u, 1, 1, 1, 0),
    SignBitSet(160u, 1, 1, 1, 0),
    LessOrGreater(161u, 1, 1, 2, 0),
    Ordered(162u, 1, 1, 2, 0),
    Unordered(163u, 1, 1, 2, 0),
    LogicalEqual(164u, 1, 1, 2, 0),
    LogicalNotEqual(165u, 1, 1, 2, 0),
    LogicalOr(166u, 1, 1, 2, 0),
    LogicalAnd(167u, 1, 1, 2, 0),
    LogicalNot(168u, 1, 1, 1, 0),
    Select(169u, 1, 1, 3, 0),
    IEqual(170u, 1, 1, 2, 0),
    INotEqual(171u, 1, 1, 2, 0),
    UGreaterThan(172u, 1, 1, 2, 0),
    SGreaterThan(173u, 1, 1, 2, 0),
    UGreaterThanEqual(174u, 1, 1, 2, 0),
    SGreaterThanEqual(175u, 1, 1, 2, 0),
    ULessThan(176u, 1, 1, 2, 0),
    SLessThan(177u, 1, 1, 2, 0),
    ULessThanEqual(178u, 1, 1, 2, 0),
    SLessThanEqual(179u, 1, 1, 2, 0),
    FOrdEqual(180u, 1, 1, 2, 0),
    FUnordEqual(181u, 1, 1, 2, 0),
    FOrdNotEqual(182u, 1, 1, 2, 0),
    FUnordNotEqual(183u, 1, 1, 2, 0),
    FOrdLessThan(184u, 1, 1, 2, 0),
    FUnordLessThan(185u, 1, 1, 2, 0),
    FOrdGreaterThan(186u, 1, 1, 2, 0),
    FUnordGreaterThan(187u, 1, 1, 2, 0),
    FOrdLessThanEqual(188u, 1, 1, 2, 0),
    FUnordLessThanEqual(189u, 1, 1, 2, 0),
    FOrdGreaterThanEqual(190u, 1, 1, 2, 0),
    FUnordGreaterThanEqual(191u, 1, 1, 2, 0),
    Op192(192u, 1, 1, 0, 0),
    Op193(193u, 1, 1, 0, 0),
    ShiftRightLogical(194u, 1, 1, 2, 0),
    ShiftRightArithmetic(195u, 1, 1, 2, 0),
    ShiftLeftLogical(196u, 1, 1, 2, 0),
    BitwiseOr(197u, 1, 1, 2, 0),
    BitwiseXor(198u, 1, 1, 2, 0),
    BitwiseAnd(199u, 1, 1, 2, 0),
    Not(200u, 1, 1, 1, 0),
    BitFieldInsert(201u, 1, 1, 4, 0),
    BitFieldSExtract(202u, 1, 1, 3, 0),
    BitFieldUExtract(203u, 1, 1, 3, 0),
    BitReverse(204u, 1, 1, 1, 0),
    BitCount(205u, 1, 1, 1, 0),
    Op206(206u, 1, 1, 0, 0),
    DPdx(207u, 1, 1, 0, 0),
    DPdy(208u, 1, 1, 0, 0),
    Fwidth(209u, 1, 1, 0, 0),
    DPdxFine(210u, 1, 1, 0, 0),
    DPdyFine(211u, 1, 1, 0, 0),
    FwidthFine(212u, 1, 1, 0, 0),
    DPdxCoarse(213u, 1, 1, 0, 0),
    DPdyCoarse(214u, 1, 1, 0, 0),
    FwidthCoarse(215u, 1, 1, 0, 0),
    Op216(216u, 1, 1, 0, 0),
    Op217(217u, 1, 1, 0, 0),
    EmitVertex(218u, 0, 0, 0, 0),
    EndPrimitive(219u, 0, 0, 0, 0),
    EmitStreamVertex(220u, 0, 0, 0, 0),
    EndStreamPrimitive(221u, 0, 0, 0, 0),
    Op222(222u, 1, 1, 0, 0),
    Op223(223u, 1, 1, 0, 0),
    ControlBarrier(224u, 0, 0, -3, 0),
    MemoryBarrier(225u, 0, 0, -2, 0),
    Op226(226u, 1, 1, 0, 0),
    AtomicLoad(227u, 1, 1, 0, 0),
    AtomicStore(228u, 0, 0, 0, 0),
    AtomicExchange(229u, 1, 1, 0, 0),
    AtomicCompareExchange(230u, 1, 1, 0, 0),
    AtomicCompareExchangeWeak(231u, 1, 1, 0, 0),
    AtomicIIncrement(232u, 1, 1, 0, 0),
    AtomicIDecrement(233u, 1, 1, 0, 0),
    AtomicIAdd(234u, 1, 1, 0, 0),
    AtomicISub(235u, 1, 1, 0, 0),
    AtomicSMin(236u, 1, 1, 0, 0),
    AtomicUMin(237u, 1, 1, 0, 0),
    AtomicSMax(238u, 1, 1, 0, 0),
    AtomicUMax(239u, 1, 1, 0, 0),
    AtomicAnd(240u, 1, 1, 0, 0),
    AtomicOr(241u, 1, 1, 0, 0),
    AtomicXor(242u, 1, 1, 0, 0),
    Op243(243u, 1, 1, 0, 0),
    Op244(244u, 1, 1, 0, 0),
    Phi(245u, 1, 1, 0, 0),
    LoopMerge(246u, 0, 0, -2, 1),
    SelectionMerge(247u, 	0, 0, -1, 1),
    Label(248u, 1, 0, 0, 0),
    Branch(249u, 	0, 0, -1, 0),
    BranchConditional(250u, 	0, 0, -3, 1),
    Switch(251u, 0, 0, 0, 0),
    Kill(252u, 0, 0, 0, 0),
    Return(253u, 0, 0, 0, 0),
    ReturnValue(254u, 0, 0, 0, 0),
    Unreachable(255u, 0, 0, 0, 0),
    LifetimeStart(256u, 0, 0, 0, 0),
    LifetimeStop(257u, 0, 0, 0, 0),
    Op258(258u, 1, 1, 0, 0),
    GroupAsyncCopy(259u, 1, 1, 0, 0),
    GroupWaitEvents(260u, 0, 0, 0, 0),
    GroupAll(261u, 1, 1, 0, 0),
    GroupAny(262u, 1, 1, 0, 0),
    GroupBroadcast(263u, 1, 1, 0, 0),
    GroupIAdd(264u, 1, 1, 0, 0),
    GroupFAdd(265u, 1, 1, 0, 0),
    GroupFMin(266u, 1, 1, 0, 0),
    GroupUMin(267u, 1, 1, 0, 0),
    GroupSMin(268u, 1, 1, 0, 0),
    GroupFMax(269u, 1, 1, 0, 0),
    GroupUMax(270u, 1, 1, 0, 0),
    GroupSMax(271u, 1, 1, 0, 0),
    Op272(272u, 1, 1, 0, 0),
    Op273(273u, 1, 1, 0, 0),
    ReadPipe(274u, 1, 1, 0, 0),
    WritePipe(275u, 1, 1, 0, 0),
    ReservedReadPipe(276u, 1, 1, 0, 0),
    ReservedWritePipe(277u, 1, 1, 0, 0),
    ReserveReadPipePackets(278u, 1, 1, 0, 0),
    ReserveWritePipePackets(279u, 1, 1, 0, 0),
    CommitReadPipe(280u, 0, 0, 0, 0),
    CommitWritePipe(281u, 0, 0, 0, 0),
    IsValidReserveId(282u, 1, 1, 0, 0),
    GetNumPipePackets(283u, 1, 1, 0, 0),
    GetMaxPipePackets(284u, 1, 1, 0, 0),
    GroupReserveReadPipePackets(285u, 1, 1, 0, 0),
    GroupReserveWritePipePackets(286u, 1, 1, 0, 0),
    GroupCommitReadPipe(287u, 0, 0, 0, 0),
    GroupCommitWritePipe(288u, 0, 0, 0, 0),
    Op289(289u, 1, 1, 0, 0),
    Op290(290u, 1, 1, 0, 0),
    EnqueueMarker(291u, 1, 1, 0, 0),
    EnqueueKernel(292u, 1, 1, 0, 0),
    GetKernelNDrangeSubGroupCount(293u, 1, 1, 0, 0),
    GetKernelNDrangeMaxSubGroupSize(294u, 1, 1, 0, 0),
    GetKernelWorkGroupSize(295u, 1, 1, 0, 0),
    GetKernelPreferredWorkGroupSizeMultiple(296u, 1, 1, 0, 0),
    RetainEvent(297u, 0, 0, 0, 0),
    ReleaseEvent(298u, 0, 0, 0, 0),
    CreateUserEvent(299u, 1, 1, 0, 0),
    IsValidEvent(300u, 1, 1, 0, 0),
    SetUserEventStatus(301u, 0, 0, 0, 0),
    CaptureEventProfilingInfo(302u, 0, 0, 0, 0),
    GetDefaultQueue(303u, 1, 1, 0, 0),
    BuildNDRange(304u, 1, 1, 0, 0),
    ImageSparseSampleImplicitLod(305u, 1, 1, 2, 1),
    ImageSparseSampleExplicitLod(306u, 1, 1, 2, 1),
    ImageSparseSampleDrefImplicitLod(307u, 1, 1, 3, 1),
    ImageSparseSampleDrefExplicitLod(308u, 1, 1, 3, 1),
    ImageSparseSampleProjImplicitLod(309u, 1, 1, 2, 1),
    ImageSparseSampleProjExplicitLod(310u, 1, 1, 2, 1),
    ImageSparseSampleProjDrefImplicitLod(311u, 1, 1, 3, 1),
    ImageSparseSampleProjDrefExplicitLod(312u, 1, 1, 3, 1),
    ImageSparseFetch(313u, 1, 1, 2, 1),
    ImageSparseGather(314u, 1, 1, 3, 1),
    ImageSparseDrefGather(315u, 1, 1, 3, 1),
    ImageSparseTexelsResident(316u, 1, 1, 1, 0),
    NoLine(317u, 0, 0, 0, 0),
    AtomicFlagTestAndSet(318u, 1, 1, 0, 0),
    AtomicFlagClear(319u, 0, 0, 0, 0),
    ImageSparseRead(320u, 1, 1, 0, 0),
    SizeOf(321u, 1, 1, 0, 0),
    TypePipeStorage(322u, 1, 1, 0, 0),
    ConstantPipeStorage(323u, 1, 1, 0, 0),
    CreatePipeFromPipeStorage(324u, 1, 1, 0, 0),
    GetKernelLocalSizeForSubgroupCount(325u, 1, 1, 0, 0),
    GetKernelMaxNumSubgroups(326u, 1, 1, 0, 0),
    TypeNamedBarrier(327u, 1, 1, 0, 0),
    NamedBarrierInitialize(328u, 1, 1, 0, 1),
    MemoryNamedBarrier(329u, 0, 0, -2, 1),
    ModuleProcessed(330u, 1, 1, 0, 0),
    KnownOpsCount(331u, 0, 0, 0, 0);

    val hasResult get() = hasResultValue != 0
    val hasType get() = hasTypeValue != 0
    val varRest get() = varRestValue != 0
    val debugInfo get() = equalsAnyOf(*debugInfoArray)

    fun remap(): SpvOp {
        return when (this) {
            Decorate -> Nop
            Nop -> Decorate
            Load -> Undef
            Undef -> Load
            Store -> SourceContinued
            SourceContinued -> Store
            AccessChain -> Source
            Source -> AccessChain
            VectorShuffle -> SourceExtension
            SourceExtension -> VectorShuffle
            MemberDecorate -> String
            String -> MemberDecorate
            Label -> Line
            Line -> Label
            Variable -> Op9
            Op9 -> Variable
            FMul -> Extension
            Extension -> FMul
            FAdd -> ExtInstImport
            ExtInstImport -> FAdd
            TypePointer -> MemoryModel
            MemoryModel -> TypePointer
            FNegate -> EntryPoint
            EntryPoint -> FNegate
            else -> this
        }
    }

    companion object: NumericalEnumCompanion<SpvOp, UInt>() {
        private val debugInfoArray = arrayOf(
            SourceContinued, Source, SourceExtension, Name,
            MemberName, String, Line, NoLine, ModuleProcessed
        )
    }
}